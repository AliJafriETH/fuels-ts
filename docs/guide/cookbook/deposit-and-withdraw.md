---
title: "Deposit And Withdraw"
parent: "Cookbook"
grand_parent: "Guide"
---

[info]: this file is autogenerated
Consider the following contracts:

```rust
// tokenContract.sw
contract;
use std::token::mint_to;

abi TokenContract {
    fn mint(amount: u64, to: Identity);
}

impl TokenContract for Contract {
    fn mint(amount: u64, to: Identity) {
        mint_to(amount, to);
    }
}
```

```rust
// liquidityPool.sw
contract;

use std::{
    call_frames::{
        contract_id,
        msg_asset_id,
    },
    context::msg_amount,
    token::{
        mint_to_address,
        transfer_to_address,
    },
};

abi LiquidityPool {
    fn deposit(recipient: Address);
    fn withdraw(recipient: Address);
}

const BASE_TOKEN: b256 = 0x9ae5b658754e096e4d681c548daf46354495a437cc61492599e33fc64dcdc30c;

impl LiquidityPool for Contract {
    fn deposit(recipient: Address) {
        assert(ContractId::from(BASE_TOKEN) == msg_asset_id());
        assert(0 < msg_amount());

        // Mint two times the amount.
        let amount_to_mint = msg_amount() * 2;

        // Mint some LP token based upon the amount of the base token.
        mint_to_address(amount_to_mint, recipient);
    }

    fn withdraw(recipient: Address) {
        assert(contract_id() == msg_asset_id());
        assert(0 < msg_amount());

        // Amount to withdraw.
        let amount_to_transfer = msg_amount() / 2;

        // Transfer base token to recipient.
        transfer_to_address(amount_to_transfer, ContractId::from(BASE_TOKEN), recipient);
    }
}
```

The first contract is a contract that represents a simple token. It has a single method, `mint()` , that mints a given amount of tokens to a given address.

The second contract, as its name suggests, represents a simplified example of a liquidity pool contract. The method deposit() expects you to supply an arbitrary amount of the `BASE_TOKEN`. As a result, it mints double the amount of the liquidity asset to the calling address. Analogously, if you call `withdraw()` supplying it with the liquidity asset, it will transfer half that amount of the `BASE_TOKEN` back to the calling address except for deducting it from the contract balance instead of minting it.

The first step towards interacting with any contract in the TypeScript SDK is using the `typegen` CLI utility to generate type-safe bindings for the contract methods:

```sh
$ npx fuels typgen -i ./contract/out/debug/*-abi.json -o ./contract-types
```

Next, let's setup a [`Wallet`](../wallets/index.md) and mint some tokens to it. We'll need these tokens to deposit into the liquidity pool contract.

```typescript
const provider = new Provider("http://0.0.0.0:4000/graphql");
const wallet = Wallet.fromPrivateKey("0x01", provider);
const tokenContractId =
  "0xa71080ef4e7c9053de166cd94d16adc55f49d772677fb6272f22bf2239baa897";
const tokenContract = TokenContractAbi__factory.connect(
  tokenContractId,
  wallet
);
const result = await tokenContract.functions
  .withdraw({
    value: wallet.address.toB256(),
  })
  .callParams({
    forward: {
      amount: new BN(5),
      assetId: contractId,
    },
  })
  .call();
```

Now, let's deposit some tokens into the liquidity pool contract. Since we have to transfer assets to the contract, we create the appropriate [`callParams`](../contracts/call-parameters.md) and chain them to the method call.

```typescript
const lpContractID =
  "0x17d2d3271dce1ad8f04c21c42e74517d778f63c66058600b5aad17601faef926";
const lpContract = LPContractAbi__factory.connect(lpContractID, wallet);
const depositResult = await lpContract.functions
  .deposit({
    value: wallet.address.toB256(),
  })
  .callParams({
    forward: {
      amount: new BN(5),
      assetId: tokenContractId,
    },
  })
  .call();

console.log(depositResult);
```

As a final demonstration, let's use all our liquidity asset balance to withdraw from the pool and confirm we retrieved the initial amount. For this, we get our liquidity asset balance and supply it to the `withdraw()` function via `callParams`.

```typescript
const lpTokenBalance = await wallet.getBalance(lpContractID);
const withdrawalResult = await lpContract.functions
  .withdraw({
    value: wallet.address.toB256(),
  })
  .callParams({
    forward: {
      amount: lpTokenBalance,
      assetId: contractId,
    },
  })
  .call();

console.log(withdrawalResult);
```
